<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="alternate" type="application/rss+xml" href="/variant/blog/rss.xml" title="Variant RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/variant/blog/atom.xml" title="Variant Atom Feed"><title data-react-helmet="true">Todo | Variant</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://paarthenon.github.io/variant/docs/next/todo"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Todo | Variant"><meta data-react-helmet="true" name="description" content="Using a custom discriminant"><meta data-react-helmet="true" property="og:description" content="Using a custom discriminant"><link data-react-helmet="true" rel="shortcut icon" href="/variant/img/variant.ico"><link data-react-helmet="true" rel="canonical" href="https://paarthenon.github.io/variant/docs/next/todo"><link data-react-helmet="true" rel="alternate" href="https://paarthenon.github.io/variant/docs/next/todo" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://paarthenon.github.io/variant/docs/next/todo" hreflang="x-default"><link rel="stylesheet" href="/variant/assets/css/styles.8f6f238e.css">
<link rel="preload" href="/variant/assets/js/runtime~main.c4bae73e.js" as="script">
<link rel="preload" href="/variant/assets/js/main.dd3a7da7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/variant/"><div class="navbar__logo"><img src="/variant/img/variant_logo.png" alt="Variant Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/variant/img/variant_logo.png" alt="Variant Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Variant</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/variant/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/variant/docs/about">About</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/variant/docs/next/intro">3.0.0-dev ðŸ”¨</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/variant/docs/next/todo">3.0.0-dev ðŸ”¨</a></li><li><a class="dropdown__link" href="/variant/docs/intro">2.1.0</a></li></ul></div><a class="navbar__item navbar__link" href="/variant/docs/api">â˜• API</a><a href="https://github.com/paarthenon/variant" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒ’</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒ”</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/variant/docs/next/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Tutorial</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/tutorial/part-zero">Introducing &quot;Kind of Super&quot;</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">The Book</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Creation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/inspection">Inspection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/organization">Organization</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Matching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/book/flags">Flags and Matrix</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/new-in-3.0">New in Variant 3.0 âœ¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/variant/docs/next/cheat">Cheat Sheet</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Articles</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/variant/docs/next/todo">Todo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/variant/docs/next/glossary">ðŸ“‘ Glossary of Terms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/variant/docs/next/api/modules">â˜• API</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Variant<!-- --> <b>3.0.0-dev ðŸ”¨</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/variant/docs/intro">latest version</a></b> (<!-- -->2.1.0<!-- -->).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->3.0.0-dev ðŸ”¨</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Todo</h1></header><h3 class="anchor anchorWithStickyNavbar_31ik" id="using-a-custom-discriminant">Using a custom discriminant<a aria-hidden="true" class="hash-link" href="#using-a-custom-discriminant" title="Direct link to heading">â€‹</a></h3><p>Add a section on how to use a custom discriminant instead of &quot;type&quot;</p><p>Include a brief stop at <code>variantCosmos</code>, explain that this violates tree shaking so if you need the functions to be tree-shakable then call their individual implementations like <code>matchImpl</code> from <code>variant/lib/match</code>. Maybe I should drop the <code>lib</code> so that people can import them more easily.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="documentation">DOCUMENTATION.<a aria-hidden="true" class="hash-link" href="#documentation" title="Direct link to heading">â€‹</a></h3><p>Highlight the fact that JSDoc-style documentation on the members of a variant actually translate to the final object!</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="a-discussion-on-polymorphic-variants">A discussion on polymorphic variants.<a aria-hidden="true" class="hash-link" href="#a-discussion-on-polymorphic-variants" title="Direct link to heading">â€‹</a></h3><p>Note: this is NOT IMPORTANT.</p><p>but it is interesting. Discuss the difference between polymorphic and regular variants and compare the nature of discriminated unions to the two options. They are clearly closer to polymorphic variants.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="tree-shaking">Tree-shaking<a aria-hidden="true" class="hash-link" href="#tree-shaking" title="Direct link to heading">â€‹</a></h3><p>Claim (and test) that the library is tree-shakable</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="tests">Tests<a aria-hidden="true" class="hash-link" href="#tests" title="Direct link to heading">â€‹</a></h3><p>Show the extensive test suite. Explain that the test suite can be used as a set of examples for what the library can actually do. </p><h3 class="anchor anchorWithStickyNavbar_31ik" id="create-a-stackblitz-several">Create a stackblitz (several)<a aria-hidden="true" class="hash-link" href="#create-a-stackblitz-several" title="Direct link to heading">â€‹</a></h3><p>Create some stackblitz projects showing how variants can really alter the flow.</p><ul><li>A react app </li></ul><p>I&#x27;m not going to show you a todo app. The beauty of variants is that they turn rather more complex tasks into trivial exercises.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="generating-new-variants-procedural-generation">Generating new variants (Procedural Generation).<a aria-hidden="true" class="hash-link" href="#generating-new-variants-procedural-generation" title="Direct link to heading">â€‹</a></h3><p>Show that it is possible to enumerate the possible constructors and generate a variant by matching on the type of the function!</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="flags-and-matrix">Flags and Matrix<a aria-hidden="true" class="hash-link" href="#flags-and-matrix" title="Direct link to heading">â€‹</a></h3><p>Demonstrate the utility of flags and matrix. Talk about the possibilities when you can treat something like an object (cache it) <em>or</em> as a list (enumerate it). There are typically problems with iterating through disparate entities, but variants are the ideal solution to that problem.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="used-in-production">Used in production<a aria-hidden="true" class="hash-link" href="#used-in-production" title="Direct link to heading">â€‹</a></h3><p>Highlight that there are multiple companies that use variant in production. </p><h3 class="anchor anchorWithStickyNavbar_31ik" id="use-some-or-all">Use some or all<a aria-hidden="true" class="hash-link" href="#use-some-or-all" title="Direct link to heading">â€‹</a></h3><p>Variant is built on standard language features. This means that you can use as much or as little of the library as you wish. It is entirely possible to use variant for the advanced creation utilities and then return to a traditional switch statement to process these items or good old <code>if (animal.type === &#x27;cat&#x27;) {</code> which will narrow correctly.</p><p>It is also entirely possible to ignore the creation utilities completely. I know of at least a couple users who use graphQL codegen to create their discriminated unions but use variant&#x27;s matching utilities to process them.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="describe-unopinionated">Describe unopinionated.<a aria-hidden="true" class="hash-link" href="#describe-unopinionated" title="Direct link to heading">â€‹</a></h3><p>Variant, against the fashion of the time, is <em>unopinionated</em>. Variant does not proselytize, it is intended to be foundational library and operate <em>on your terms</em> while doing its utter best to stay out of your way.</p><ul><li>use whatever naming or capitalization</li><li>use raw styles </li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="naming-conventions">Naming conventions<a aria-hidden="true" class="hash-link" href="#naming-conventions" title="Direct link to heading">â€‹</a></h3><p>Should <code>Animal</code> be singular or pluralized? Should case names be <code>camelCase</code>, <code>PascalCase</code>, or <code>snake_case</code>? It does not matter to the library. I personally recommand that variants be singular, cases be <code>PascalCase</code>, and the flags version be plural. i.e. <code>Attribute</code>, <code>Attribute.VideoCodec</code>, and <code>Attributes</code> referring to the potential object on some model.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="augment-for-immutability"><code>augment()</code> for immutability<a aria-hidden="true" class="hash-link" href="#augment-for-immutability" title="Direct link to heading">â€‹</a></h3><p>You can create truly immutable variants by calling <code>augment()</code> and passing the function <code>Object.freeze</code> (test this).</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="autocomplete">Autocomplete<a aria-hidden="true" class="hash-link" href="#autocomplete" title="Direct link to heading">â€‹</a></h3><p>Emphasize the focus on a good autocomplete experience. This can be part of the UX conversation along with documentation. This isn&#x27;t just a laziness thing, having autocompletion implies that the types involved are constrained in useful ways.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="catalog">Catalog<a aria-hidden="true" class="hash-link" href="#catalog" title="Direct link to heading">â€‹</a></h3><p>WHile variants have flags, catalog serves as its own set of flags.</p><pre class="shiki comrade-contrast" style="background-color:rgb(26, 32, 32);color:#d6dbdb"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#C24E4B">const</span><span style="color:#D6DBDB"> </span><span style="color:#FFFFFF">subCatalog</span><span style="color:#D6DBDB"> </span><span style="color:#9BB7A7">=</span><span style="color:#D6DBDB"> </span><span style="color:#F9F7F1">catalog</span><span style="color:#D6DBDB">([</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#FFFFFF">bigCatalog</span><span style="color:#D6DBDB">.</span><span style="color:#FFFFFF">one</span><span style="color:#D6DBDB">,</span></div><div class="line"><span style="color:#D6DBDB">    </span><span style="color:#FFFFFF">bigCatalog</span><span style="color:#D6DBDB">.</span><span style="color:#FFFFFF">two</span><span style="color:#D6DBDB">,</span></div><div class="line"><span style="color:#D6DBDB">]);</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><pre class="shiki Monotone-red-color-theme" style="background-color:#000000;color:#ffffff"><div class="language-id">ts</div><div class="code-container"><code><div class="line"><span style="color:#A8A8B1">const</span><span style="color:#FFFFFF"> </span><span style="color:#F56565">subCatalog</span><span style="color:#FFFFFF"> </span><span style="color:#A8A8B1">=</span><span style="color:#FFFFFF"> catalog</span><span style="color:#A8A8B1">(</span><span style="color:#FFFFFF">[</span></div><div class="line"><span style="color:#FFFFFF">    </span><span style="color:#F56565">bigCatalog</span><span style="color:#FFFFFF">.one,</span></div><div class="line"><span style="color:#FFFFFF">    </span><span style="color:#F56565">bigCatalog</span><span style="color:#FFFFFF">.two,</span></div><div class="line"><span style="color:#FFFFFF">]</span><span style="color:#A8A8B1">)</span><span style="color:#FFFFFF">;</span></div></code></div><button type="button" aria-label="Copy code to clipboard" class="copy-button">Copy</button></pre><p>That is essentially the same.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="problems-with-computed-properties">Problems with computed properties<a aria-hidden="true" class="hash-link" href="#problems-with-computed-properties" title="Direct link to heading">â€‹</a></h3><p>There&#x27;s a problem with using computed properties in the match handler - it can no longer evaluate missing cases in the autocomplete.</p><p>Basically, if you were to define a matcher where instead of using the literals themselve you used a shared type, then you would not be able to benefit from autocomplete, and you would still need to confront the issues with missing keys. In this scenario, matcher is strictly better.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/variant/docs/next/libraries/redux-toolkit"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->redux-toolkit</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/variant/docs/next/glossary"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ðŸ“‘ Glossary of Terms<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-a-custom-discriminant" class="table-of-contents__link toc-highlight">Using a custom discriminant</a></li><li><a href="#documentation" class="table-of-contents__link toc-highlight">DOCUMENTATION.</a></li><li><a href="#a-discussion-on-polymorphic-variants" class="table-of-contents__link toc-highlight">A discussion on polymorphic variants.</a></li><li><a href="#tree-shaking" class="table-of-contents__link toc-highlight">Tree-shaking</a></li><li><a href="#tests" class="table-of-contents__link toc-highlight">Tests</a></li><li><a href="#create-a-stackblitz-several" class="table-of-contents__link toc-highlight">Create a stackblitz (several)</a></li><li><a href="#generating-new-variants-procedural-generation" class="table-of-contents__link toc-highlight">Generating new variants (Procedural Generation).</a></li><li><a href="#flags-and-matrix" class="table-of-contents__link toc-highlight">Flags and Matrix</a></li><li><a href="#used-in-production" class="table-of-contents__link toc-highlight">Used in production</a></li><li><a href="#use-some-or-all" class="table-of-contents__link toc-highlight">Use some or all</a></li><li><a href="#describe-unopinionated" class="table-of-contents__link toc-highlight">Describe unopinionated.</a></li><li><a href="#naming-conventions" class="table-of-contents__link toc-highlight">Naming conventions</a></li><li><a href="#augment-for-immutability" class="table-of-contents__link toc-highlight"><code>augment()</code> for immutability</a></li><li><a href="#autocomplete" class="table-of-contents__link toc-highlight">Autocomplete</a></li><li><a href="#catalog" class="table-of-contents__link toc-highlight">Catalog</a></li><li><a href="#problems-with-computed-properties" class="table-of-contents__link toc-highlight">Problems with computed properties</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/variant/docs/intro">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/variant/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/variant/docs/api">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Related</div><ul class="footer__items"><li class="footer__item"><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>TypeScript<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://reasonml.github.io/docs/en/variant" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>ReasonML Variants<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/paarthenon/variant" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.npmjs.com/package/variant" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>NPM package<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Variant Contributors</div></div></div></footer></div>
<script src="/variant/assets/js/runtime~main.c4bae73e.js"></script>
<script src="/variant/assets/js/main.dd3a7da7.js"></script>
</body>
</html>